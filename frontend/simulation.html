<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SolarDiagnose | Physics Simulation</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Outfit:wght@600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/index.css">
</head>

<body>
    <aside class="sidebar">
        <div class="logo">
            <i class="fas fa-sun-plant-wilt"></i>
            <span>SolarDiagnose</span>
        </div>
        <div id="backend-status"
            style="margin: 0.5rem 1.5rem 1.5rem; padding: 0.5rem; background: rgba(255,255,255,0.03); border-radius: 8px; display: flex; align-items: center; gap: 0.8rem; border: 1px solid rgba(255,255,255,0.05);">
            <div id="backend-status-dot"
                style="width: 8px; height: 8px; border-radius: 50%; background: #94a3b8; transition: background 0.3s ease;">
            </div>
            <span id="backend-status-text"
                style="font-size: 0.7rem; color: var(--text-muted); font-weight: 500;">Checking
                Backend...</span>
        </div>
        <nav class="nav-links">
            <a href="index.html" class="nav-item"><i class="fas fa-chart-line"></i> <span>Dashboard</span></a>
            <a href="simulation.html" class="nav-item active"><i class="fas fa-vial"></i> <span>Simulation</span></a>
            <a href="performance.html" class="nav-item"><i class="fas fa-gauge-high"></i> <span>Performance</span></a>
            <a href="diagnosis.html" class="nav-item"><i class="fas fa-microscope"></i> <span>Fault Diagnosis</span></a>
            <a href="results.html" class="nav-item"><i class="fas fa-file-invoice"></i> <span>Results & Logs</span></a>
            <a href="faq.html" class="nav-item"><i class="fas fa-circle-question"></i> <span>FAQs</span></a>
        </nav>
    </aside>

    <main class="main-content">
        <header>
            <div class="header-title">
                <h1>Simulation Laboratory</h1>
                <p>Configure and test system variables under controlled scenarios</p>
            </div>
        </header>

        <div class="form-container animate-fade">
            <form id="sim-form">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="irradiance">Solar Irradiance (G) [W/m²]</label>
                        <input type="number" id="irradiance" placeholder="e.g. 500-1000" min="200" max="1000" required>
                    </div>
                    <div class="form-group">
                        <label for="tin">Inlet Temperature (T_in) [°C]</label>
                        <input type="number" id="tin" placeholder="e.g. 30" min="25" max="45" required>
                    </div>
                    <div class="form-group">
                        <label for="tamb">Ambient Temp (T_amb) [°C]</label>
                        <input type="number" id="tamb" placeholder="e.g. 25" min="20" max="40" required>
                    </div>
                    <div class="form-group">
                        <label for="flow_rate">Mass Flow Rate (ṁ) [kg/s]</label>
                        <input type="number" id="flow_rate" placeholder="e.g. 0.02" step="0.001" min="0.01" max="0.05"
                            required>
                    </div>
                    <div class="form-group">
                        <label for="measured_tout">Measured Outlet Temp [°C] (Optional)</label>
                        <input type="number" id="measured_tout" placeholder="Measured reading (20-85)" min="20"
                            max="85">
                    </div>
                    <div class="form-group">
                        <label for="fault_type">Inject System Fault (For AI Stress Testing)</label>
                        <select id="fault_type">
                            <option value="Normal Condition">Normal Condition (Ideal System)</option>
                            <option value="Dust Accumulation">Dust Accumulation (Simulate Fouling)</option>
                            <option value="Heat Leakage">Heat Leakage (Simulate Pipe Loss)</option>
                            <option value="Pump Degradation">Pump Degradation (Simulate Flow Loss)</option>
                            <option value="Sensor Drift">Sensor Drift (Simulate Scale Error)</option>
                        </select>
                        <small style="color: var(--text-muted); display: block; margin-top: 0.3rem; line-height: 1.2;">
                            Note: The AI diagnostic engine will independenty identify this fault based only on the
                            resulting physics.
                        </small>
                    </div>
                </div>
                <div style="margin-top: 2rem;">
                    <button type="submit" class="btn-primary" style="width: 100%;">
                        <i class="fas fa-play"></i> Execute Physics Computation
                    </button>
                </div>
            </form>
        </div>

        <section id="sim-results" class="card animate-fade" style="margin-top: 2rem; display: none;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h3 style="color: var(--primary);">Computation Output</h3>
                <div class="status-badge status-normal">Result Calculated</div>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
                <div>
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th>Output Parameter</th>
                                <th>Unit</th>
                                <th>Computed Value</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Simulated Outlet Temp (T_out)</td>
                                <td>°C</td>
                                <td id="res-tout" style="font-weight: 600; font-size: 1.1rem;">--</td>
                            </tr>
                            <tr>
                                <td>Calculated Thermal Efficiency (η)</td>
                                <td>%</td>
                                <td id="res-eff" style="font-weight: 600; color: var(--secondary);">--</td>
                            </tr>
                            <tr>
                                <td>Useful Heat Gain (Q_u)</td>
                                <td>W</td>
                                <td id="res-gain" style="font-weight: 600;">--</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div style="background: rgba(255,255,255,0.02); border-radius: 12px; padding: 1rem;">
                    <h4 style="margin-bottom: 1rem; font-size: 0.9rem; color: var(--text-muted);">Real-time Computation
                        Trace</h4>
                    <canvas id="sim-live-chart" height="180"></canvas>
                </div>
            </div>
        </section>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/app.js"></script>
</body>

</html>